{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"endpoints/_template/","title":"Endpoint Name","text":""},{"location":"endpoints/_template/#1-endpoint-definition","title":"1. Endpoint Definition","text":"<p>Description: </p> <p>Replace this with a concise explanation of what the clinical endpoint captures, why it matters, and where it typically appears (structured fields, clinical notes, pathology reports, treatment plans, etc.). </p> <p>Relevant Background &amp; Links: </p> <p>Add key clinical references, guideline citations, coding manuals, or other external standards. </p> <p>Cancer Domains: </p> <p>List the cancer domains this endpoint applies to (e.g., Lung, Colorectal, Head &amp; Neck, All). </p> <p>Endpoint Type: </p> <p>Categorical / Numeric / Text extraction / EAV / Entity Linking / Temporal Relationship (select one or multiple). </p> <p>Endpoint Status:  | Assessment | Details |  |-----------|---------|  | Feasibility | Comment on feasibility: how commonly expressed? how ambiguous? how consistent across sites? |  | Priority | Why this endpoint is clinically or analytically important; when it is needed. |  | Maturity / Current State | Describe prototypes, heuristics, notebooks, partial implementations, or upstream dependencies. |  | Shareability | How much site-specific tuning is required? How portable is this extraction target? | </p>"},{"location":"endpoints/_template/#2-examples","title":"2. Examples","text":""},{"location":"endpoints/_template/#21-positive-examples","title":"2.1 Positive Examples","text":"<p>Provide representative sentences or fragments from clinical notes that clearly express the endpoint.  - Example positive phrasing 1  - Example positive phrasing 2  - Example positive phrasing 3 </p>"},{"location":"endpoints/_template/#22-negative-exclusions","title":"2.2 Negative / Exclusions","text":"<p>Provide examples that appear related but should not be extracted, or cases that require explicit handling.  - Ambiguous or misleading example 1 &gt; - Ambiguous example 2  - Narrative text that should not be mapped to the endpoint </p>"},{"location":"endpoints/_template/#23-general-guidelines-for-disambiguation","title":"2.3 General Guidelines for Disambiguation","text":"<p>Document rules-of-thumb for resolving ambiguous expressions, ranges, qualifiers, negations, or conflicting statements.  - Guideline example (e.g., choose higher value in ranges)  - Guideline for resolving multi-sentence context  - Guideline for ignoring hypothetical statements </p>"},{"location":"endpoints/_template/#3-mapping-to-cdm","title":"3. Mapping to CDM","text":"<p>What should the NLP pipeline output? </p> <p>Describe the required OMOP CDM representation: Measurement, Observation, Condition, Drug Exposure, Episode, etc. Structured Output Format: Replace this JSON block with the expected structure for this endpoint (including CDM concept IDs). json {     \"measurement\": {         \"person_id\": \"...\",         \"measurement_concept_id\": \"...\",         \"measurement_date\": \"...\",         \"value_as_number\": \"...\",         \"value_as_concept_id\": \"...\",         \"value_source_value\": \"...\"     } }</p>"},{"location":"endpoints/_template/#4-existing-work","title":"4. Existing Work","text":"<p>Current Solutions or Prototypes:</p> <p>Demo binder: </p> <p>Implementations in Use:</p> <p>Include performance evaluations if available</p>"},{"location":"endpoints/_template/#5-proposed-approach","title":"5. Proposed Approach","text":"<p>(complete as relevant/appropriate)</p> <p>Rule-based / Heuristic Approach</p> <ul> <li>List key patterns or features</li> <li>Example regex/patterns</li> <li>Expected performance / challenges</li> </ul> <p>Zero-shot Approach</p> <ul> <li>General specifications for structured prompting &amp; extraction</li> </ul> <p>Custom / Fine-tuned Apprach</p> <ul> <li>Complexity justification</li> <li>Validation Considerations</li> </ul>"},{"location":"endpoints/endpoint_catalogue/","title":"Endpoint catalogue","text":"Endpoint Feasibility Priority Maturity Shareability Link Performance Status (ECOG) High High High High Performance Status Smoking History High Medium Medium Medium Smoking History Actionable Genomic Variant Low\u2013Medium High Low Medium Genomic Variant Oral Chemotherapy Use Medium Medium Low Low\u2013Medium Oral Chemotherapy Radiotherapy Site / Region High Medium Medium High Radiotherapy Region"},{"location":"endpoints/performance_status/","title":"Performance status","text":""},{"location":"endpoints/performance_status/#1-endpoint-definition","title":"1. Endpoint Definition","text":"<p>Description: Performance status is a clinician-assigned score that summarises a patient\u2019s functional capacity.</p> <p>The most widely used scale is ECOG Performance Status (0\u20135):</p> ECOG Definition 0 Fully active; no restrictions 1 Restricted in physically strenuous activity but ambulatory 2 Ambulatory &gt;50% of waking hours; unable to work 3 Limited self-care; &gt;50% of time in bed/chair 4 Completely disabled 5 Dead <p>Relevant Background &amp; Links: - Oken, M. M., Creech, R. H., Tormey, D. C., Horton, J., Davis, T. E., McFadden, E. T., &amp; Carbone, P. P. (1982). Toxicity and response criteria of the Eastern Cooperative Oncology Group. American journal of clinical oncology, 5(6), 649-656.</p> <p>Cancer Domains: - Any / All </p> <p>Endpoint Type: - EAV</p> <p>Endpoint Status: </p> Assessment Details Feasibility Generally feasible \u2014 ECOG typically expressed explicitly (e.g., \u201cECOG 1\u201d, \u201cPS: 0\u20131\u201d). Priority High priority \u2014 required for trial / treatment eligibility, prognostic modelling, and risk adjustment across most cancers. Maturity / Current State Prototype regex and lightweight phrase matcher exist at some sites; notebooks and heuristics shared informally; no consolidated cross-site tool yet. Shareability High \u2014 ECOG terminology and phrasing are consistent across oncology documentation; minimal site-specific tuning expected."},{"location":"endpoints/performance_status/#2-examples","title":"2. Examples","text":""},{"location":"endpoints/performance_status/#21-positive-examples","title":"2.1 Positive Examples","text":"<p>Example Clinical Phrasing: - Performance status 2 - ECOG: 0\u20131</p>"},{"location":"endpoints/performance_status/#22-negative-exclusions","title":"2.2 Negative / Exclusions","text":"<ul> <li>Some notes use descriptive phrases e.g. Patient reports minimal exertional dyspnea<ul> <li>Current solutions do not infer PS from descriptions alone without valid and explicit physician-assessed score</li> <li>Open-ended nature of these assessments likely to induce high degree of hallucination in LLM applications and too heterogeneous for heuristic approach</li> </ul> </li> </ul>"},{"location":"endpoints/performance_status/#23-general-guidelines-for-disambiguation","title":"2.3 General Guidelines for Disambiguation","text":"<ul> <li>Range will always resolve to the higher of the two scores (e.g. PS 1-2 will be extracted as score = 2)</li> </ul>"},{"location":"endpoints/performance_status/#3-mapping-to-cdm","title":"3. Mapping to CDM","text":"<p>What exactly must the NLP pipeline output? </p> <p>Specify format and constraints.</p> <p>Structured Output Format: <pre><code>{\n    \"measurement\": {  \n        \"person_id\": 1,\n        \"measurement_id\": 2,\n        \"measurement_concept_id\": 36305384,\n        \"measurement_date\": \"2025-11-13\",\n        \"value_as_number\": 3\n    }\n}\n</code></pre></p>"},{"location":"endpoints/performance_status/#4-existing-work","title":"4. Existing Work","text":"<p>Current Solutions or Prototypes:</p> <p>Demo binder: https://github.com/gkennos/ecog_nlp_demo</p> <p>Implementations in Use:</p> <p>Include performance evaluations if available</p>"},{"location":"endpoints/performance_status/#5-proposed-approach","title":"5. Proposed Approach","text":"<p>Rule-based / Heuristic Approach</p> <ul> <li>List key patterns or features</li> <li>Example regex/patterns</li> <li>Expected performance / challenges</li> </ul>"},{"location":"endpoints/radiotherapy_regions/","title":"Radiotherapy Site/Region","text":""},{"location":"endpoints/radiotherapy_regions/#1-endpoint-definition","title":"1. Endpoint Definition","text":"<p>Description: Radiotherapy regions describe the anatomical targets to which radiation treatment is delivered (e.g., lung apex, mediastinum, pelvis, neck, brain). They are typically documented in short text fields, although the practice may vary by vendor.  </p> <p>Radiation therapy (RT) regions and fields are highly patient-specific. These elements often require custom terminology to capture precise tumour locations and geometries and rarely map to structured data fields via established standards. </p>"},{"location":"endpoints/radiotherapy_regions/#relevant-background-links","title":"Relevant Background &amp; Links:","text":""},{"location":"endpoints/radiotherapy_regions/#cancer-domains","title":"Cancer Domains:","text":"<p>Endpoint Type: - Categorical</p> <p>Endpoint Status: </p> Assessment Details Feasibility Regions are usually explicitly labelled (e.g., \u201cleft lung PTV\u201d, \u201cneck level II\u2013IV\u201d), but terminology varies across providers and vendors. Good feasibility from short targeted fields specific to RT region; moderate feasibility from general notes. Modifiers such as laterality, sub-region may obscure. Priority High \u2014 radiotherapy region is essential for toxicity modelling, organ-at-risk analysis, recurrence studies, and complete treatment trajectory reconstruction. Maturity / Current State Prototype lightweight LLM region mapper exists. Requires refinement for cross-site terminology differences. Shareability High \u2014 radiation oncology uses internationally standardised anatomic terms; region dictionaries can be harmonised with minimal local tuning."},{"location":"endpoints/radiotherapy_regions/#2-examples","title":"2. Examples","text":""},{"location":"endpoints/radiotherapy_regions/#21-positive-examples","title":"2.1 Positive Examples","text":"<ul> <li>\u201cph1 prostate\u201d  </li> <li>\u201ct11-l3\u201d  </li> <li>\u201c(r) breast/low axilla\u201d</li> </ul>"},{"location":"endpoints/radiotherapy_regions/#22-negative-exclusions","title":"2.2 Negative / Exclusions","text":"<ul> <li>This pipeline is designed to handle short targeted text snippets only</li> <li>Text in open clinical notes currently excluded</li> <li>To consider: Radiology reports</li> </ul>"},{"location":"endpoints/radiotherapy_regions/#23-general-guidelines-for-disambiguation","title":"2.3 General Guidelines for Disambiguation","text":"<ul> <li>Prefer anatomical region names over planning structure names unless unambiguous (e.g., \u201cPTV_LUL\u201d \u2192 left upper lobe).  </li> <li>If multiple regions appear (e.g., \u201coropharynx + bilateral neck\u201d), extract each region separately.  </li> </ul>"},{"location":"endpoints/radiotherapy_regions/#3-mapping-to-cdm","title":"3. Mapping to CDM","text":"<p>What should the NLP pipeline output? Radiotherapy procedures as Procedure Occurrence (radiotherapy procedure concepts). For region extraction, create an Observation record documenting the anatomical target as a concept. Laterality should be applied as an additional modifier to the relevant procedure occurrence.</p> <p>Structured Output Format: </p> <pre><code>{\n    \"observation\": {\n        \"person_id\": 1234,\n        \"observation_concept_id\": 4165732,        // 4190005 (body site), 4240671 (body organ) - any child code thereof\n        \"observation_date\": \"2025-11-13\",\n        \"observation_source_value\": \"ph2 prostate bed\",\n        \"observation_event_id\": 999,\n        \"obs_event_field_concept_id\": 1147082     // procedure_occurrence.procedure_occurrence_id - this is applied as a modifier of radiotherapy procedure\n    }\n}\n</code></pre>"},{"location":"methods/prompting/","title":"Prompt Curation","text":""},{"location":"methods/prompting/#collaborative-prompt-library-guidelines","title":"Collaborative Prompt Library Guidelines","text":"<p>A cross-site approach for reliable, versioned, and reproducible prompt engineering</p> <p>Goal: set up and maintain a shared prompt library, ensuring that:</p> <ul> <li>Prompts are reproducible across teams and compute environments  </li> <li>Outputs follow a common schema, so downstream pipelines (ETL, dashboards, validation interfaces) can rely on them  </li> <li>Methods can be peer-reviewed, improved, and benchmarked transparently  </li> <li>Tools and patterns can be re-used across cancer domains  </li> <li>Version control tracks lineage of every change to prompt logic or output structure  </li> </ul> <p>This collaborative approach lets teams contribute LLM-based development into a shared ecosystem.</p>"},{"location":"methods/prompting/#how-the-prompt-library-works","title":"How the Prompt Library Works","text":"<p>Prompt-O is a lightweight linkML-based toolchain with a few simple wrapper tools for common use-cases.</p> <p>Each extraction target (e.g., conditions, performance status, radiotherapy region) is represented using a LinkML schema</p> <p>LinkML provides:</p> <ul> <li>A clear data contract</li> <li>Strong typing (e.g., enums, ranges, nested objects)</li> <li>Ability to generate pydantic models via <code>gen-pydantic</code></li> <li>Portable schemas that can be reused (and extended) outside this project  </li> <li>Validation of LLM outputs  </li> <li>Automatic JSON conversion  </li> <li>Type-safe integration with downstream python code  </li> </ul> <p>These schemas define what an LLM must return. They do not dictate how extraction is done.</p> <p>Prompts themselves are authored and stored in plain YAML files.</p> <p>Each prompt definition file contains:</p> <ul> <li><code>system</code>: instructions to the model  </li> <li><code>instruction</code>: task description  </li> <li><code>output_model</code>: the LinkML/Pydantic model to use  </li> <li><code>examples</code>: zero-shot, few-shot, or scenario-based examples  </li> </ul>"},{"location":"methods/prompting/#recommended-workflow-for-collaborators","title":"Recommended Workflow for Collaborators","text":"<ol> <li>Identify an endpoint e.g. ECOG, radiotherapy region, variant of interest</li> <li>Define or update the LinkML schema, ensuring output fields match analytic needs <ul> <li>The schema definitions can be submitted to the OntoGPT tool-specific configuration folder</li> </ul> </li> <li>Generate the Pydantic model</li> <li>Create a new prompt file</li> <li>Write or refine the system prompt + examples, includin few-shot examples whenever possible</li> <li>Validate prompts</li> <li>Submit draft to prompt library for network validation &amp; iteration</li> </ol> <p>Note: Detailed instructions for steps 3 through 6 can be found at https://github.com/AustralianCancerDataNetwork/prompt-o</p>"},{"location":"methods/tokenization/","title":"Tokenization","text":""},{"location":"methods/tokenization/#tokenization-strategy","title":"Tokenization Strategy","text":"<p>Clinical text contains irregular punctuation, shorthand, unit expressions, and domain-specific notation that do not align well with typical tokenization behaviour. Tumour staging, abbreviations, units, measurements, genomic variants, and clinical shorthand all introduce patterns where:</p> <ul> <li>Punctuation can be meaningful, not merely syntactic</li> <li>Slash-delimited expressions contain multiple kinds of information</li> <li>Capitalisation and domain-specific abbreviations should remain joined</li> </ul> <p>To support a consistent rule-based and matcher-based NLP pipeline, this project uses a two-phase tokenization strategy:</p> <ol> <li>Overly enthusiastic initial splitting to avoid missed matches</li> <li>Targeted reassembly of clinically meaningful multi-token units</li> </ol> <p>All matcher rules in this catalogue assume this tokenisation strategy has been applied.</p> <p>Phase 1 \u2014 Brutal Splitting</p> <p>In the first pass, we deliberately over-split the text on characters that often obstruct lightweight NLP (such as slashes, periods, commas, parentheses)</p> <p>Phase 2 \u2014 Selective Reassembly</p> <p>After splitting, we recombine specific patterns that logically belong together, so that matcher patterns can work on semantically meaningful units (decimals &amp; scientific notation, dates, times, units)</p>"},{"location":"methods/value_extraction/","title":"Value extraction","text":""},{"location":"methods/value_extraction/#valueextractor","title":"ValueExtractor","text":"<p>ValueExtractor provides a utility class to wrap spaCy\u2019s Matcher for the identification of text spans corresponding to specific clinical entities of the form <code>[label] [value]</code>. Extracting a usable <code>value</code> applies logic to match numeric (or literal) values within the overall labelled span.</p> <p>Its purpose is to identify an entity defined by the label AND extract the value tied to it, using separate matchers.</p> <p>It provides a uniform interface for: * running a spaCy matcher * filtering overlapping matches * merging matched spans * setting custom token-level flags (e.g., tok._.ecog = True)</p> <p>To do this, requires creating patterns for: * <code>token_patterns</code> tell the system how to find the overall span * <code>value_patterns</code> tell the system how to extract the numeric or alphanumeric score inside the matched span * <code>norm_patterns</code> (optional) normalise variant forms into a canonical label string. * <code>exclusion_patterns</code> (optional) exclude common false-positive matches</p> <p>Example: * It identifies the phrase \u201cPG-SGA score (3b)\u201d as a single span via token_patterns. * It finds the value \"3b\" inside that span via value_patterns. * It merges the whole span to one token. * It attaches attributes:     * tok..pgsga = True     * tok..pgsga_value = 3 OR \"3b\" (depending on normalisation logic)     * If entity_label is set, it creates a clinical entity.</p>"},{"location":"tools/medspaCy/","title":"MedspaCy &amp; spaCy configurations","text":""}]}